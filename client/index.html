<html>
  <head>
    <script src="https://cdn.socket.io/4.3.2/socket.io.min.js" integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs" crossorigin="anonymous"></script>
    <script>
      const socket = io('http://localhost:3000');
      socket.on('connect', function() {
        console.log('Connected');


        // Весь этот блок это вход в чат, а значит, что можно смело помечать все сообщения прочитанными
        // Сообщаем серверу, что хотим подключиться к чату
        socket.emit('subscribeToChat', {
          chatId: '64a5559a300864196c5c661c',
          userId: '64a5549c300864196c5c660c'
        } , res => {
          // Прослушиваем определенную комнату
          socket.on(res, (data) => {
            console.log('Новое сообщение', data)
          })
        });

        // Подписка на сообщения из чата техподдержки
        // socket.send(JSON.stringify({
        //   message: "subscribeToChat",
        //   payload: {
        //     chatId: '64a5559a300864196c5c661c',
        //   }
        // }));
    
      }); 
    
    </script>
  </head>

  <body></body>
</html>
